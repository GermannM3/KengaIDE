# Проверка сборки KengaIDE

## Почему изменения не применяются

### 1. Запуск не той сборки
- **Проблема:** Запускается старая копия (из кэша, другой папки, старый ярлык).
- **Решение:** Полностью удалить приложение (Параметры → Приложения → KengaIDE → Удалить). Установить заново из `target\release\bundle\nsis\KengaIDE_0.1.0_x64-setup.exe`.

### 2. Сборка без очистки
- **Проблема:** Vite кэширует, dist содержит старые файлы.
- **Решение:** Использовать `npm run tauri:clean:build` — удаляет dist и собирает заново.

### 3. WebView2 кэш
- **Проблема:** WebView2 может кэшировать старую версию.
- **Решение:** После установки закрыть все окна KengaIDE, подождать 5 сек, запустить снова.

### 4. Несколько установок
- **Проблема:** KengaIDE установлен в нескольких местах (например, dev + release).
- **Решение:** Удалить все копии. Проверить: `C:\Program Files\KengaIDE\`, `%LOCALAPPDATA%\KengaIDE\`.

---

## Правильная последовательность сборки

```powershell
# 1. Очистка и полная пересборка
npm run tauri:clean:build

# 2. Дождаться успешного завершения (без ошибок)

# 3. Удалить старую версию
# Параметры Windows → Приложения → KengaIDE → Удалить

# 4. Установить новую
# Запустить: target\release\bundle\nsis\KengaIDE_0.1.0_x64-setup.exe

# 5. Проверить версию
# Справка → О программе — смотрите "Сборка: YYYY-MM-DD HH:MM:SS"
```

---

## Как убедиться, что запущена новая версия

1. **Справка → О программе** — время сборки должно совпадать с моментом `tauri build`.
2. **Модель** — в модальном окне у локальных провайдеров должна быть пометка «(локально)».
3. **+ API** — должен быть выбор: OpenAI, Kimi, Mistral, Custom.

---

## Файлы сборки

| Путь | Назначение |
|------|------------|
| `dist/` | Фронтенд (Vite build) — создаётся `beforeBuildCommand` |
| `target/release/kengaide.exe` | Исполняемый файл (без установщика) |
| `target/release/bundle/nsis/KengaIDE_0.1.0_x64-setup.exe` | Установщик NSIS |
| `target/release/bundle/msi/KengaIDE_0.1.0_x64_en-US.msi` | Установщик MSI |
